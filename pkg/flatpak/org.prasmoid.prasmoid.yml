#flatpak run --command=flatpak-builder-lint org.flatpak.Builder appstream org.prasmoid.prasmoid.metainfo.xml
#flatpak-builder --force-clean --user --install-deps-from=flathub --repo=repo --install builddir org.prasmoid.prasmoid.yml 
#flatpak build-bundle repo prasmoid-v0.0.3.flatpak org.prasmoid.prasmoid --runtime-repo=https://flathub.org/repo/flathub.flatpakrepo

id: org.prasmoid.prasmoid
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk

command: prasmoid

modules:
  - name: binary
    buildsystem: simple
    build-commands:
      - install -Dm755 prasmoid /app/bin/prasmoid
    sources:
      - type: file
        url: https://github.com/PRASSamin/prasmoid/releases/download/v0.0.3/prasmoid
        sha256: 72e4c2b772188ff7ac3ac1b210238a2b9aff1ef8a2844f11df999a44990dcc96
  
  - name: docs
    buildsystem: simple
    build-commands:
      - mkdir /app/doc
      - install -Dm644 *.md /app/doc/
    sources:
      - type: file
        path: ../../README.md
      - type: file
        path: ../../LICENSE.md

  - name: metadata
    buildsystem: simple
    build-commands:
      - install -Dm644 org.prasmoid.prasmoid.metainfo.xml -t /app/share/metainfo/
      - mv logo.svg org.prasmoid.prasmoid.svg
      - install -Dm644 org.prasmoid.prasmoid.svg -t /app/share/icons/hicolor/scalable/apps/
    sources:
        - type: file
          path: org.prasmoid.prasmoid.metainfo.xml
        - type: file
          path: ../../logo.svg

